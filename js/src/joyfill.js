!function(o){const n='joyfill-iframe';function e(o){const e=function(o){const e=document.createElement('iframe');return e.src=o.url,e.height='100%',e.width='100%',e.id=n,e.style.borderWidth=0,e}({url:o.url,config:o.config}),t=document.querySelector(o.mountOn);if(!t)throw new Error(`Could not find the mountOn element id of ${o.mountOn}`);t.appendChild(e),function(o){window.top.addEventListener('message',(({origin:n,data:e})=>{try{'onChange'===e.type?o.handlers.onChange(e):'onSubmit'===e.type?o.handlers.onSubmit(e):'onUploaded'===e.type?o.handlers.onUploaded(e):'onError'===e.type&&o.handlers.onError(e)}catch(o){throw new Error(o)}}),!1)}({handlers:o.handlers})}o.Portal=class{static config;constructor(o){this.config=o}static load(o){this.config||(this.config=o),(o=>{if('object'!=typeof o)throw Error('Joyfill config must exist and be type of object');const{onChange:n,onError:e}=o,t=Object.keys(o);if(!t.includes('userAccessToken')||t.includes('userAccessToken')&&o.userAccessToken.length<100)throw Error('Joyfill must have a valid userAccessToken');if(t.includes('mountOn')&&t.includes('mode'),n&&'function'!=typeof n)throw Error('Joyfill onChange must exist and be type of function');if(e&&'function'!=typeof e)throw Error('Joyfill onError must exist and be type of function')})(this.config);const{url:n}={url:`https://app-joy.joyfill.io/embed?userAccessToken=${(t=this.config).userAccessToken}&mode=${t.mode||'fill'}&documentIdentifier=${t.documentIdentifier}&feature=${t.feature}`};var t;!function(o){const{url:n,config:t}=o;e({config:t,url:n,mountOn:t.mountOn,document:t.document,handlers:{onChange:t.onChange,onSubmit:t.onSubmit,onUploaded:t.onUploaded,onError:t.onError}})}({config:this.config,url:n})}}}({});
